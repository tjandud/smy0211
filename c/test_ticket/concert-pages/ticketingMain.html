<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>í‹°ì¼“ ì˜ˆë§¤</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: "Malgun Gothic", "ë§‘ì€ ê³ ë”•", AppleGothic, sans-serif;
      background: #fff;
      color: #333;
      font-size: 13px;
    }

    /* Top header - 1st row */
    .header-top {
      background: #fff;
      border-bottom: 1px solid #f0f0f0;
      padding: 14px 0;
    }
    .header-top-inner {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 20px;
    }
    .logo {
      font-size: 22px;
      font-weight: 700;
      color: #5551ff;
      text-decoration: none;
      letter-spacing: -0.5px;
    }
    .logo span { color: #000; }

    /* Top header - 2nd row */
    .header-nav {
      background: #fff;
      border-bottom: 1px solid #e0e0e0;
      padding: 14px 0;
    }
    .header-nav-inner {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .main-nav {
      display: flex;
      gap: 32px;
      font-size: 24px;
      font-weight: 600;
    }
    .main-nav a {
      color: #333;
      text-decoration: none;
    }
    .main-nav a:hover {
      color: #5551ff;
    }
    .user-links {
      display: flex;
      gap: 16px;
      font-size: 13px;
    }
    .user-links a {
      color: #000;
      text-decoration: none;
      font-weight: 600;
    }
    .user-links a:hover {
      color: #333;
    }

    /* Breadcrumb */
    .breadcrumb {
      max-width: 1280px;
      margin: 20px auto;
      padding: 0 20px;
      font-size: 12px;
      color: #999;
    }

    /* Title section - full width above content */
    .title-section {
      max-width: 1280px;
      margin: 0 auto 24px;
      padding: 0 20px;
    }
    
    .title-section .category {
      color: #666;
      font-size: 13px;
      margin-bottom: 8px;
    }
    
    .title-section .goods-title {
      font-size: 24px;
      font-weight: 700;
      color: #000;
      margin-bottom: 8px;
      line-height: 1.4;
    }
    
    .title-section .rating {
      color: #666;
      font-size: 14px;
    }

    /* Main container - 3 column layout */
    .container {
      max-width: 1280px;
      margin: 0 auto 40px;
      padding: 0 20px;
      display: grid;
      grid-template-columns: 350px 1fr 420px;
      gap: 30px;
    }
    /* Left - Poster */
    .poster-section {
      position: sticky;
      top: 20px;
      align-self: start;
    }
    .poster-img {
      width: 100%;
      border-radius: 8px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.12);
    }
    .poster-footer {
      margin-top: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .like-count {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: #666;
    }
    .social-links {
      display: flex;
      gap: 6px;
    }
    .social-btn {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 1px solid #ddd;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 14px;
      text-decoration: none;
      color: #666;
    }
    .social-btn:hover {
      background: #f5f5f5;
      border-color: #bbb;
    }

    /* Center - Info */
    .info-section {
      padding-top: 8px;
    }
    .category {
      font-size: 13px;
      color: #999;
      margin-bottom: 8px;
    }
    .goods-title {
      font-size: 26px;
      font-weight: 700;
      color: #000;
      margin-bottom: 12px;
      line-height: 1.4;
    }
    .rating {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 24px;
      font-size: 13px;
    }
    .stars {
      color: #ffa300;
      font-weight: 700;
    }
    .rating-value {
      color: #333;
      font-weight: 600;
    }

    .info-table {
      border-top: 2px solid #000;
      margin-bottom: 30px;
    }
    .info-row {
      display: flex;
      border-bottom: 1px solid #e8e8e8;
      padding: 16px 0;
    }
    .info-label {
      width: 120px;
      color: #666;
      font-size: 13px;
      font-weight: 500;
    }
    .info-value {
      flex: 1;
      color: #000;
      font-size: 14px;
      line-height: 1.6;
    }
    .info-value strong {
      font-weight: 600;
    }

    /* Right - Booking Panel */
    .booking-panel {
      background: #fff;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 24px;
      position: sticky;
      top: 20px;
      align-self: start;
      margin-top: -120px; /* ì œëª© ì˜ì—­ ë†’ì´ë§Œí¼ ìœ„ë¡œ */
    }
    .panel-title {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid #e8e8e8;
    }

    /* Calendar */
    .calendar-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }
    .calendar-header button {
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      color: #666;
      padding: 4px 8px;
    }
    .calendar-month {
      font-size: 16px;
      font-weight: 600;
    }
    .calendar {
      margin-bottom: 24px;
    }
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      text-align: center;
      margin-bottom: 4px;
    }
    .calendar-day-header {
      padding: 8px 0;
      font-size: 12px;
      color: #999;
      font-weight: 500;
    }
    .calendar-days-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      text-align: center;
    }
    .calendar-day {
      padding: 10px 0;
      font-size: 13px;
      border-radius: 4px;
      cursor: pointer;
      position: relative;
      font-weight: 700;
    }
    .calendar-day:hover {
      background: #f5f5f5;
    }
    .calendar-day.selected {
      background: #5551ff;
      color: #fff;
      font-weight: 700;
    }
    .calendar-day.disabled {
      color: #ddd;
      cursor: not-allowed;
      font-weight: 400;
    }
    .calendar-day.disabled:hover {
      background: transparent;
    }

    /* Session selection */
    .session-section {
      margin-bottom: 24px;
    }
    .session-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 12px;
    }
    .session-item {
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 14px 16px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .session-item:hover {
      border-color: #5551ff;
      background: #f8f8ff;
    }
    .session-item.selected {
      border-color: #5551ff;
      background: #f0f0ff;
      border-width: 2px;
    }
    .session-time {
      font-size: 15px;
      font-weight: 600;
      color: #000;
      margin-bottom: 6px;
    }
    .session-info {
      font-size: 12px;
      color: #666;
      display: flex;
      gap: 10px;
    }

    /* Cast info */
    .cast-section {
      margin-bottom: 24px;
    }
    .cast-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .cast-list {
      font-size: 12px;
      color: #666;
      line-height: 1.6;
    }

    /* Book button */
    .btn-book {
      width: 100%;
      padding: 16px;
      background: #5551ff;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 17px;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.2s;
    }
    .btn-book:hover {
      background: #4440dd;
    }
    .btn-book:active {
      transform: translateY(1px);
    }
    .btn-book:disabled {
      background: #ddd;
      cursor: not-allowed;
    }

    @media (max-width: 1024px) {
      .container {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      .poster-section, .booking-panel {
        position: static;
      }
    }
  </style>
</head>
<body>
  <!-- Header - Top Row -->
  <div class="header-top">
    <div class="header-top-inner">
      <a href="#" class="logo">NOL <span>interpark</span></a>
    </div>
  </div>

  <!-- Header - Nav Row -->
  <div class="header-nav">
    <div class="header-nav-inner">
      <div class="main-nav">
        <a href="#">í™ˆ</a>
        <a href="#">íˆ¬ì–´</a>
        <a href="#" style="color:#5551ff;">í‹°ì¼“</a>
      </div>
      <div class="user-links">
        <a href="#">ë¡œê·¸ì¸</a>
        <a href="#">ë‚´ ì˜ˆì•½</a>
      </div>
    </div>
  </div>

  <!-- Breadcrumb -->
  <div class="breadcrumb">
    *í• ì¸ëŒ€ê¸° â“˜
  </div>

  <!-- Title Section - Full Width -->
  <div class="title-section">
    <div class="category" id="category">ì—°ê·¹</div>
    <h1 id="goods-title" class="goods-title">ê³µì—° ì œëª©</h1>
    <div class="rating">
      <span class="stars">â˜…â˜…â˜…â˜…â˜…</span>
      <span class="rating-value" id="rating">9.6</span>
      <span style="color:#999">ì—°ê·¹ ì¶”ì²œ 40ìœ„</span>
    </div>
  </div>

  <!-- Main Container -->
  <div class="container">
    <!-- Left: Poster -->
    <div class="poster-section">
      <img id="poster-img" src="" alt="ê³µì—° í¬ìŠ¤í„°" class="poster-img" />
      <div class="poster-footer">
        <div class="like-count">
          â™¡ í‹°ì¼“ìºìŠ¤íŠ¸ <span id="like-count">228</span>
        </div>
        <div class="social-links">
          <a href="#" class="social-btn" title="Facebook">f</a>
          <a href="#" class="social-btn" title="Twitter">ğ•</a>
        </div>
      </div>
    </div>

    <!-- Center: Info -->
    <div class="info-section">

      <div class="info-table">
        <div class="info-row">
          <div class="info-label">ì¥ì†Œ</div>
          <div class="info-value" id="venue">ì˜ˆìŠ¤24ì•„íŠ¸ì› 2ê´€ â–¶</div>
        </div>
        <div class="info-row">
          <div class="info-label">ê³µì—°ê¸°ê°„</div>
          <div class="info-value" id="period">2025.09.30 ~2025.12.14</div>
        </div>
        <div class="info-row">
          <div class="info-label">ê³µì—°ì‹œê°„</div>
          <div class="info-value" id="runtime">110ë¶„</div>
        </div>
        <div class="info-row">
          <div class="info-label">ê´€ëŒì—°ë ¹</div>
          <div class="info-value" id="age-limit">13ì„¸ ì´ìƒ ê´€ëŒê°€ëŠ¥</div>
        </div>
        <div class="info-row">
          <div class="info-label">ê°€ê²©</div>
          <div class="info-value">
            <div><strong>Rì„</strong> <span id="price-r">66,000ì›</span></div>
            <div><strong>Sì„</strong> <span id="price-s">44,000ì›</span></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right: Booking Panel -->
    <div class="booking-panel">
      <div class="panel-title">ê´€ëŒì¼</div>

      <!-- Calendar -->
      <div class="calendar">
        <div class="calendar-header">
          <button onclick="prevMonth()">â€¹</button>
          <div class="calendar-month" id="calendar-month">2025. 11</div>
          <button onclick="nextMonth()">â€º</button>
        </div>
        <div class="calendar-grid">
          <div class="calendar-day-header">ì¼</div>
          <div class="calendar-day-header">ì›”</div>
          <div class="calendar-day-header">í™”</div>
          <div class="calendar-day-header">ìˆ˜</div>
          <div class="calendar-day-header">ëª©</div>
          <div class="calendar-day-header">ê¸ˆ</div>
          <div class="calendar-day-header">í† </div>
        </div>
        <!-- Calendar days will be inserted here -->
        <div class="calendar-days-grid" id="calendar-days"></div>
      </div>

      <!-- Session -->
      <div class="session-section">
        <div class="session-title">íšŒì°¨</div>
        <div id="session-list">
          <div class="session-item" onclick="selectSession(this)">
            <div class="session-time">1íšŒ 20:00</div>
            <div class="session-info">
              <span>Rì„ 81</span>
              <span>Sì„ 31</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Cast -->
      <div class="cast-section">
        <div class="cast-title">ìºìŠ¤íŒ…</div>
        <div class="cast-list" id="cast-list">ê¹€ë‹¨ì›, ê¹€ì´ë‹´, ì´ìŠ¹ì›</div>
      </div>

      <!-- Book button -->
      <button class="btn-book" id="btn-book" onclick="startBooking()">ì˜ˆë§¤í•˜ê¸°</button>
    </div>
  </div>

  <script>
    // ê³µì—° ë‚ ì§œ ìƒì„± í•¨ìˆ˜ (ì˜¤ëŠ˜ ê¸°ì¤€ 7~21ì¼ í›„ ì‚¬ì´ì—ì„œ ëœë¤ ì‹œì‘, 2ì¼ê°„ ì§„í–‰)
    function generateConcertDates() {
      const today = new Date();
      const daysOffset = Math.floor(Math.random() * 15) + 7; // 7~21ì¼ í›„
      const startDate = new Date(today);
      startDate.setDate(today.getDate() + daysOffset);
      
      const endDate = new Date(startDate);
      endDate.setDate(startDate.getDate() + 1); // 2ì¼ê°„
      
      const formatDate = (date) => {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        return `${year}.${month}.${day}`;
      };
      
      return {
        period: `${formatDate(startDate)} ~${formatDate(endDate)}`,
        startDate: startDate,
        endDate: endDate
      };
    }
    
    // ê° ê³µì—°ë§ˆë‹¤ ë‚ ì§œ ìƒì„±
    const concertDates = generateConcertDates();

    // Artist data by level
    const artistData = {
      easy: [
        {
          name: 'íŠ¸ë£¨ì›¨ìŠ¤íŠ¸ ã€ˆ2025 ì½˜ì„œíŠ¸ã€‰',
          image: '../image/concert/íŠ¸ë£¨ì›¨ìŠ¤íŠ¸.gif',
          category: 'ì½˜ì„œíŠ¸',
          venue: 'ì˜¬ë¦¼í”½ê³µì› ì˜¬ë¦¼í”½í™€ â–¶',
          period: concertDates.period,
          runtime: '100ë¶„',
          age: 'ë§Œ 7ì„¸ ì´ìƒ ê´€ëŒê°€ëŠ¥',
          priceR: '99,000ì›',
          priceS: '77,000ì›',
          rating: '9.2',
          likeCount: '156',
          cast: 'íŠ¸ë£¨ì›¨ìŠ¤íŠ¸ ë°´ë“œ'
        },
        {
          name: 'í­ìˆ˜ì™€ í•¨ê»˜í•˜ëŠ” ã€ˆíŠ¹ë³„ ê³µì—°ã€‰',
          image: '../image/concert/í­ìˆ˜.gif',
          category: 'ë®¤ì§€ì»¬/ì˜¤í˜ë¼',
          venue: 'KSPO DOME â–¶',
          period: concertDates.period,
          runtime: '90ë¶„',
          age: 'ì „ì²´ ê´€ëŒê°€ëŠ¥',
          priceR: '88,000ì›',
          priceS: '66,000ì›',
          rating: '9.8',
          likeCount: '342',
          cast: 'í­ìˆ˜, EBS ì¶œì—°ì§„'
        }
      ],
      normal: [
        {
          name: 'ë¼íë§ˆë‹ˆë…¸í”„ ã€ˆí”¼ì•„ë…¸ í˜‘ì£¼ê³¡ 2ë²ˆã€‰',
          image: '../image/concert/ë¼íë§ˆë‹ˆë…¸í”„.gif',
          category: 'í´ë˜ì‹/ë¬´ìš©',
          venue: 'ì˜ˆìˆ ì˜ì „ë‹¹ ì½˜ì„œíŠ¸í™€ â–¶',
          period: concertDates.period,
          runtime: '120ë¶„',
          age: 'ë§Œ 7ì„¸ ì´ìƒ ê´€ëŒê°€ëŠ¥',
          priceR: '150,000ì›',
          priceS: '120,000ì›',
          rating: '9.7',
          likeCount: '289',
          cast: 'ì¡°ì„±ì§„, KBSêµí–¥ì•…ë‹¨'
        },
        {
          name: 'ë¶€í™œ ã€ˆ30ì£¼ë…„ ê¸°ë… ì½˜ì„œíŠ¸ã€‰',
          image: '../image/concert/ë¶€í™œ.gif',
          category: 'ì½˜ì„œíŠ¸',
          venue: 'ì ì‹¤ì‹¤ë‚´ì²´ìœ¡ê´€ â–¶',
          period: concertDates.period,
          runtime: '150ë¶„',
          age: 'ë§Œ 13ì„¸ ì´ìƒ ê´€ëŒê°€ëŠ¥',
          priceR: '154,000ì›',
          priceS: '132,000ì›',
          rating: '9.4',
          likeCount: '418',
          cast: 'ê¹€íƒœì›, ì´ìŠ¹ì² , ì •ë™í•˜'
        },
        {
          name: 'ê¸°ë¦¬ë³´ì´ X ì›ìŠˆíƒ€ì¸ ã€ˆì¡°ì¸íŠ¸ ì½˜ì„œíŠ¸ã€‰',
          image: '../image/concert/ê¸°ë¦¬ë³´ì´ ì›ìŠˆíƒ€ì¸.gif',
          category: 'ì½˜ì„œíŠ¸',
          venue: 'ë¸”ë£¨ìŠ¤í€˜ì–´ ë§ˆìŠ¤í„°ì¹´ë“œí™€ â–¶',
          period: concertDates.period,
          runtime: '110ë¶„',
          age: 'ë§Œ 15ì„¸ ì´ìƒ ê´€ëŒê°€ëŠ¥',
          priceR: '121,000ì›',
          priceS: '99,000ì›',
          rating: '9.5',
          likeCount: '367',
          cast: 'ê¸°ë¦¬ë³´ì´, ì›ìŠˆíƒ€ì¸'
        }
      ],
      hard: [
        {
          name: 'Doja Cat ã€ˆWorld Tour - Seoulã€‰',
          image: '../image/concert/ë„ììº£.gif',
          category: 'ì½˜ì„œíŠ¸',
          venue: 'ê³ ì²™ìŠ¤ì¹´ì´ë” â–¶',
          period: concertDates.period,
          runtime: '150ë¶„',
          age: 'ë§Œ 15ì„¸ ì´ìƒ ê´€ëŒê°€ëŠ¥',
          priceR: '220,000ì›',
          priceS: '198,000ì›',
          rating: '9.8',
          likeCount: '892',
          cast: 'Doja Cat'
        },
        {
          name: 'ONE OK ROCK ã€ˆ2025 Live in Seoulã€‰',
          image: '../image/concert/ì›ì˜¤í¬ë½.gif',
          category: 'ì½˜ì„œíŠ¸',
          venue: 'KSPO DOME â–¶',
          period: concertDates.period,
          runtime: '140ë¶„',
          age: 'ë§Œ 13ì„¸ ì´ìƒ ê´€ëŒê°€ëŠ¥',
          priceR: '187,000ì›',
          priceS: '165,000ì›',
          rating: '9.6',
          likeCount: '673',
          cast: 'ONE OK ROCK'
        },
        {
          name: 'OneRepublic ã€ˆLive in Seoulã€‰',
          image: '../image/concert/ì›ë¦¬í¼ë¸”ë¦­.gif',
          category: 'ì½˜ì„œíŠ¸',
          venue: 'Olympic Hall â–¶',
          period: concertDates.period,
          runtime: '130ë¶„',
          age: 'ë§Œ 15ì„¸ ì´ìƒ ê´€ëŒê°€ëŠ¥',
          priceR: '209,000ì›',
          priceS: '187,000ì›',
          rating: '9.7',
          likeCount: '754',
          cast: 'OneRepublic'
        },
        {
          name: 'tuki. ã€ˆSpecial Concertã€‰',
          image: '../image/concert/tuki..gif',
          category: 'ì½˜ì„œíŠ¸',
          venue: 'ë¸”ë£¨ìŠ¤í€˜ì–´ â–¶',
          period: '2025.04.25 ~2025.04.27',
          runtime: '120ë¶„',
          age: 'ë§Œ 19ì„¸ ì´ìƒ ê´€ëŒê°€ëŠ¥',
          priceR: '176,000ì›',
          priceS: '154,000ì›',
          rating: '9.9',
          likeCount: '521',
          cast: 'tuki.'
        }
      ]
    };

    // Get level and hall from URL params
    const urlParams = new URLSearchParams(window.location.search);
    const selectedLevel = urlParams.get('level') || 'normal';
    const selectedHall = urlParams.get('hall') || 'YES24í™€';
    
    // Select random artist from level pool
    const levelPool = artistData[selectedLevel] || artistData.normal;
    const selectedArtist = levelPool[Math.floor(Math.random() * levelPool.length)];

    // Hall name mapping
    const hallNames = {
      'YES24í™€': 'YES24ì•„íŠ¸ì› 2ê´€',
      'ê³ ì²™ ìŠ¤ì¹´ì´ë”': 'ê³ ì²™ìŠ¤ì¹´ì´ë”',
      'default': 'ì˜ˆìˆ ì˜ì „ë‹¹ ì½˜ì„œíŠ¸í™€'
    };
    const displayHallName = hallNames[selectedHall] || selectedArtist.venue;

    // Populate page with selected artist data
    document.getElementById('goods-title').textContent = selectedArtist.name;
    document.getElementById('category').textContent = selectedArtist.category;
    document.getElementById('poster-img').src = selectedArtist.image;
    document.getElementById('venue').textContent = displayHallName + ' â–¶';
    document.getElementById('period').textContent = selectedArtist.period;
    document.getElementById('runtime').textContent = selectedArtist.runtime;
    document.getElementById('age-limit').textContent = selectedArtist.age;
    document.getElementById('price-r').textContent = selectedArtist.priceR;
    document.getElementById('price-s').textContent = selectedArtist.priceS;
    document.getElementById('rating').textContent = selectedArtist.rating;
    document.getElementById('like-count').textContent = selectedArtist.likeCount;
    document.getElementById('cast-list').textContent = selectedArtist.cast;

    console.log('ticketingMain: level=', selectedLevel, 'artist=', selectedArtist.name);

    // Calendar functionality
    // ê³µì—° ì‹œì‘ì¼ì˜ ì›”/ë…„ë„ë¡œ ì´ˆê¸°í™”
    let currentMonth = concertDates.startDate.getMonth();
    let currentYear = concertDates.startDate.getFullYear();
    let selectedDate = null;
    
    // ì˜ˆë§¤ ê°€ëŠ¥í•œ ë‚ ì§œë“¤ (ê³µì—° ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼)
    const availableDates = [
      concertDates.startDate.getDate(),
      concertDates.endDate.getDate()
    ];

    function renderCalendar() {
      const daysContainer = document.getElementById('calendar-days');
      daysContainer.innerHTML = '';
      
      const monthEl = document.getElementById('calendar-month');
      monthEl.textContent = `${currentYear}. ${String(currentMonth + 1).padStart(2, '0')}`;

      const firstDay = new Date(currentYear, currentMonth, 1).getDay();
      const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
      
      const today = new Date();
      const todayDate = today.getDate();
      const todayMonth = today.getMonth();
      const todayYear = today.getFullYear();

      // Empty cells for days before first day of month
      for(let i = 0; i < firstDay; i++) {
        const emptyDay = document.createElement('div');
        emptyDay.className = 'calendar-day disabled';
        daysContainer.appendChild(emptyDay);
      }

      // Actual days
      for(let day = 1; day <= daysInMonth; day++) {
        const dayEl = document.createElement('div');
        dayEl.className = 'calendar-day';
        dayEl.textContent = day;
        
        // ê³µì—° ì›”ì—ì„œë§Œ ì˜ˆë§¤ ê°€ëŠ¥í•œ ë‚ ì§œ ì²´í¬
        const isAvailable = currentMonth === concertDates.startDate.getMonth() && 
                           currentYear === concertDates.startDate.getFullYear() &&
                           availableDates.includes(day);
        
        // ì²« ë Œë”ë§ì´ê³  ì„ íƒëœ ë‚ ì§œê°€ ì—†ìœ¼ë©´ ì²« ê³µì—°ì¼ ìë™ ì„ íƒ
        if(!selectedDate && day === availableDates[0] && isAvailable) {
          dayEl.classList.add('selected');
          selectedDate = day;
        }
        // ì´ë¯¸ ì„ íƒëœ ë‚ ì§œë©´ selected ì¶”ê°€
        if(day === selectedDate && isAvailable) {
          dayEl.classList.add('selected');
        }
        
        // ì˜ˆë§¤ ë¶ˆê°€ëŠ¥í•œ ë‚ ì§œëŠ” disabled
        if(!isAvailable) {
          dayEl.classList.add('disabled');
        } else {
          dayEl.onclick = () => selectDate(day);
        }
        
        daysContainer.appendChild(dayEl);
      }
    }

    function selectDate(day) {
      selectedDate = day;
      // ëª¨ë“  ë‚ ì§œì—ì„œ selected í´ë˜ìŠ¤ ì œê±°
      const allDays = document.querySelectorAll('.calendar-day');
      allDays.forEach(d => d.classList.remove('selected'));
      // í´ë¦­ëœ ë‚ ì§œì—ë§Œ selected ì¶”ê°€
      const clickedDay = Array.from(allDays).find(d => 
        d.textContent == day && !d.classList.contains('disabled')
      );
      if(clickedDay) {
        clickedDay.classList.add('selected');
      }
    }

    function prevMonth() {
      currentMonth--;
      if(currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      }
      renderCalendar();
    }

    function nextMonth() {
      currentMonth++;
      if(currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      }
      renderCalendar();
    }

    function selectSession(el) {
      document.querySelectorAll('.session-item').forEach(item => {
        item.classList.remove('selected');
      });
      el.classList.add('selected');
    }

    function startBooking() {
      if(!selectedDate) {
        alert('ê´€ëŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      
      // URL íŒŒë¼ë¯¸í„°ë¡œ ì •ë³´ ì „ë‹¬
      const urlParams = new URLSearchParams(window.location.search);
      const level = urlParams.get('level') || 'normal';
      const hall = urlParams.get('hall') || 'YES24í™€';
      const bookingDate = `${currentYear}.${String(currentMonth+1).padStart(2,'0')}.${String(selectedDate).padStart(2,'0')}`;
      
      // yes24hall.htmlë¡œ ì´ë™
      location.href = `yes24hall.html?level=${level}&hall=${encodeURIComponent(hall)}&date=${encodeURIComponent(bookingDate)}`;
    }

    // Initialize
    renderCalendar();
    // No need to disable button - today is auto-selected
  </script>
</body>
</html>
